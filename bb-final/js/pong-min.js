const canvas=document.getElementById("pong"),ctx=canvas.getContext("2d");let hit=new Audio,wall=new Audio,userScore=new Audio,comScore=new Audio;const ball={x:canvas.width/2,y:canvas.height/2,radius:15,velocityX:5,velocityY:5,speed:10,zIndex:10,color:"#FE9BB1"},user={x:0,y:(canvas.height-100)/2,width:10,height:100,score:0,color:"#FE9BB1"},com={x:canvas.width-10,y:(canvas.height-100)/2,width:10,height:100,score:0,color:"#FE9BB1"},net={x:(canvas.width-2)/2,y:0,height:10,width:2,color:"#FE9BB1"};function drawRect(e,t,o,l,a){ctx.fillStyle=a,ctx.fillRect(e,t,o,l)}function drawArc(e,t,o,l){ctx.fillStyle=l,ctx.beginPath(),ctx.arc(e,t,o,0,2*Math.PI,!0),ctx.closePath(),ctx.fill()}let theGame=document.getElementById("juego"),whereisMouse=theGame.addEventListener("mousemove",getMousePos);function getMousePos(e){let t=canvas.getBoundingClientRect();user.y=e.clientY-t.top-user.height/2}function resetBall(){ball.x=canvas.width/2,ball.y=canvas.height/2,ball.velocityX=-ball.velocityX,ball.speed=10}function drawNet(){for(let e=0;e<=canvas.height;e+=15)drawRect(net.x,net.y+e,net.width,net.height,net.color)}function drawText(e,t,o){ctx.fillStyle="#FE9BB1",ctx.font="65px helvetica",ctx.fillText(e,t,o)}function collision(e,t){return t.top=t.y,t.bottom=t.y+t.height,t.left=t.x,t.right=t.x+t.width,e.top=e.y-e.radius,e.bottom=e.y+e.radius,e.left=e.x-e.radius,e.right=e.x+e.radius,t.left<e.right&&t.top<e.bottom&&t.right>e.left&&t.bottom>e.top}function update(){ball.x-ball.radius<0?(com.score++,comScore.play(),resetBall()):ball.x+ball.radius>canvas.width&&(user.score++,userScore.play(),resetBall()),ball.x+=ball.velocityX,ball.y+=ball.velocityY,com.y+=.1*(ball.y-(com.y+com.height/2)),(ball.y-ball.radius<0||ball.y+ball.radius>canvas.height)&&(ball.velocityY=-ball.velocityY,wall.play());let e=ball.x+ball.radius<canvas.width/2?user:com;if(collision(ball,e)){hit.play();let t=ball.y-(e.y+e.height/2);t/=e.height/2;let o=Math.PI/4*t,l=ball.x+ball.radius<canvas.width/2?1:-1;ball.velocityX=l*ball.speed*Math.cos(o),ball.velocityY=ball.speed*Math.sin(o),ball.speed+=.1}}function render(){drawRect(0,0,canvas.width,canvas.height,"#181A18"),drawText(user.score,canvas.width/6,canvas.height/5),drawText(com.score,3*canvas.width/4,canvas.height/5),drawRect(user.x,user.y,user.width,user.height,user.color),drawRect(com.x,com.y,com.width,com.height,com.color),drawArc(ball.x,ball.y,ball.radius,ball.color)}function game(){update(),render()}let botonJugar=document.getElementById("bb-jugar"),botonJugarMobile=document.getElementById("bb-jugar-mobile"),botonParar=document.getElementById("bb-parar"),seccionLogo=document.getElementById("section-hero"),seccionJuego=document.getElementById("juego"),volveraJugar=document.createElement("button");botonJugar.onclick=function(){document.querySelector("body").classList.remove("not-ready");var e=setInterval(game,18);botonParar.onclick=function(){clearInterval(e),setTimeout((function(){seccionJuego.appendChild(volveraJugar),volveraJugar.innerHTML="volver a jugar",volveraJugar.classList.add("boton-volver")}),500)},seccionLogo.classList.add("fade-out"),setTimeout((function(){seccionLogo.style.display="none"}),500)},volveraJugar.onclick=function(){setInterval(game,18);seccionJuego.removeChild(volveraJugar)},botonJugarMobile.onclick=function(){document.querySelector("body").classList.remove("not-ready"),seccionLogo.classList.add("fade-out"),setTimeout((function(){seccionLogo.style.display="none"}),500)};